<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>NOVA XMD V1 • Pairing</title>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
<style>
  @import url('https://fonts.googleapis.com/css2?family=Share+Tech+Mono&display=swap');

  :root{
    --neon:#00ff99;
    --neon2:#00fff9;
    --pink:#ff00c1;
    --yellow:#ffff00;
    --card:#111;
    --muted: rgba(0,255,153,.70);
    --text: #eafff6;
  }

  *{margin:0;padding:0;box-sizing:border-box}

  body{
    height:100vh;
    display:flex;
    justify-content:center;
    align-items:center;
    font-family:'Share Tech Mono', monospace;
    color:var(--text);
    overflow:hidden;
    position:relative;

    background:
      linear-gradient(rgba(0,0,0,0.55), rgba(0,0,0,0.80)),
      url("https://files.catbox.moe/zxyyrr.jpg");
    background-size:cover;
    background-position:center;
    background-repeat:no-repeat;
    background-attachment:fixed;
  }

  body::before{
    content:"";
    position:fixed;
    inset:-10px;
    background:
      linear-gradient(rgba(0,0,0,0.55), rgba(0,0,0,0.80)),
      url("https://files.catbox.moe/zxyyrr.jpg");
    background-size:cover;
    background-position:center;
    animation:bgMove 32s linear infinite alternate;
    z-index:-4;
    filter:blur(1.2px);
    transform: scale(1.02);
  }
  @keyframes bgMove{
    0%{background-position:center top;}
    100%{background-position:center bottom;}
  }

  .matrix-bg{position:fixed; inset:0; z-index:-2; opacity:.22;}
  .matrix-line{
    position:absolute; width:2px; height:120px;
    background:linear-gradient(to bottom, transparent, var(--neon), transparent);
    animation:matrix-fall linear infinite;
  }
  @keyframes matrix-fall{
    0%{transform:translateY(-140px);opacity:0}
    10%{opacity:1}
    90%{opacity:1}
    100%{transform:translateY(100vh);opacity:0}
  }

  .glow{
    position:fixed; inset:-40px; z-index:-3;
    background:
      radial-gradient(650px 420px at 18% 18%, rgba(0,255,153,.14), transparent 62%),
      radial-gradient(520px 360px at 82% 28%, rgba(0,255,249,.14), transparent 62%),
      radial-gradient(760px 480px at 50% 92%, rgba(255,0,193,.10), transparent 62%);
    filter: blur(2px);
  }

  .header{
    position:absolute; top:16px; left:0; width:100%;
    text-align:center; z-index:10; padding:0 14px;
  }
  .header h1{
    font-size:2.55rem; letter-spacing:3px; color:var(--neon);
    text-shadow:0 0 6px var(--neon), 0 0 18px rgba(0,255,153,.55);
    display:inline-flex; align-items:center; gap:10px;
    padding:10px 0 12px; position:relative;
  }
  .header h1::after{
    content:""; position:absolute; left:50%; transform:translateX(-50%);
    bottom:0; width:240px; height:3px; background:linear-gradient(90deg, transparent, var(--neon), transparent);
    box-shadow:0 0 14px rgba(0,255,153,.9);
  }
  .header p{
    margin-top:10px; font-size:1.02rem; color:var(--neon2);
    text-shadow:0 0 10px rgba(0,255,249,.40);
    letter-spacing:1px;
    opacity:.95;
  }

  .glitch{position:relative}
  .glitch::before,.glitch::after{
    content:attr(data-text); position:absolute; top:0; left:0; width:100%; height:100%;
  }
  .glitch::before{
    left:2px; text-shadow:-2px 0 var(--pink);
    clip:rect(44px,450px,56px,0);
    animation:glitch1 5s infinite linear alternate-reverse;
    opacity:.9;
  }
  .glitch::after{
    left:-2px; text-shadow:-2px 0 var(--neon2);
    clip:rect(44px,450px,56px,0);
    animation:glitch2 5s infinite linear alternate-reverse;
    opacity:.9;
  }
  @keyframes glitch1{
    0%{clip:rect(31px,9999px,14px,0)} 20%{clip:rect(67px,9999px,53px,0)}
    40%{clip:rect(15px,9999px,83px,0)} 60%{clip:rect(14px,9999px,30px,0)}
    80%{clip:rect(1px,9999px,17px,0)} 100%{clip:rect(37px,9999px,99px,0)}
  }
  @keyframes glitch2{
    0%{clip:rect(65px,9999px,100px,0)} 25%{clip:rect(67px,9999px,61px,0)}
    50%{clip:rect(71px,9999px,75px,0)} 75%{clip:rect(47px,9999px,73px,0)}
    100%{clip:rect(38px,9999px,49px,0)}
  }

  .marquee-wrap{
    width:100%; max-width:560px; margin:0 auto 14px; overflow:hidden;
    border:1px solid rgba(0,255,153,.22); border-radius:12px;
    background:rgba(0,0,0,.38);
    box-shadow: inset 0 0 14px rgba(0,255,153,.10);
  }
  .marquee{
    display:flex; gap:44px; padding:10px 0; width:max-content;
    animation:marquee 16s linear infinite;
  }
  .marquee span{
    color:rgba(0,255,249,.95);
    text-shadow:0 0 8px rgba(0,255,249,.35);
    letter-spacing:1px; white-space:nowrap;
  }
  @keyframes marquee{
    0%{ transform: translateX(100%); }
    100%{ transform: translateX(-100%); }
  }

  .container{
    background: linear-gradient(180deg, rgba(0,0,0,.78), rgba(0,0,0,.88));
    padding:44px 34px;
    border-radius:18px;
    box-shadow:0 0 26px rgba(0,255,153,.25), 0 0 55px rgba(0,255,153,.10);
    display:flex; flex-direction:column; align-items:center;
    max-width:560px; width:92%;
    position:relative; z-index:1;
    border:1px solid rgba(0,255,153,.28);
    margin-top:110px;
    backdrop-filter: blur(10px);
  }

  .input-container{display:flex; width:100%; margin-top:14px; margin-bottom:16px;}
  .input-container input{
    flex:1; padding:15px 14px; background:rgba(0,0,0,.80);
    border:2px solid rgba(0,255,153,.85);
    color:var(--text); font-size:16px;
    border-radius:12px 0 0 12px;
    outline:none;
    box-shadow: inset 0 0 10px rgba(0,255,153,.10);
  }
  .input-container input::placeholder{color:rgba(234,255,246,.55)}
  .input-container input:focus{
    border-color: var(--neon2);
    box-shadow: inset 0 0 12px rgba(0,255,249,.14), 0 0 14px rgba(0,255,249,.10);
  }
  .input-container button{
    padding:0 18px;
    background: linear-gradient(135deg, var(--neon), var(--neon2));
    color:#02120b;
    font-weight:900;
    border:none;
    border-radius:0 12px 12px 0;
    cursor:pointer;
    font-size:15px;
    box-shadow:0 0 16px rgba(0,255,153,.35);
    white-space:nowrap;
    transition:.18s;
  }
  .input-container button:hover{ transform:translateY(-1px); box-shadow:0 0 22px rgba(0,255,153,.45); }
  .input-container button:disabled{ opacity:.65; cursor:not-allowed; transform:none; }

  .loader-wrap{
    width:100%;
    margin-top:8px;
    display:none;
    align-items:center;
    gap:10px;
    justify-content:center;
    user-select:none;
  }
  .loader-label{
    font-size:.95rem;
    color:rgba(0,255,249,.90);
    text-shadow:0 0 10px rgba(0,255,249,.25);
    letter-spacing:.5px;
  }
  .loader-bar{
    position:relative;
    width:min(360px, 100%);
    height:10px;
    border-radius:999px;
    border:1px solid rgba(0,255,153,.32);
    background:rgba(0,0,0,.35);
    overflow:hidden;
    box-shadow: inset 0 0 12px rgba(0,255,153,.10);
  }
  .loader-bar::before{
    content:"";
    position:absolute;
    top:0; left:-40%;
    width:40%;
    height:100%;
    background:linear-gradient(90deg, transparent, rgba(0,255,153,.70), rgba(0,255,249,.60), transparent);
    animation: loaderMove 1.05s linear infinite;
  }
  @keyframes loaderMove{
    0%{ left:-40%; }
    100%{ left:100%; }
  }

  #pair{
    margin-top:18px;
    font-size:1.15rem;
    text-align:center;
    cursor:pointer;
    padding:12px 18px;
    border:2px solid rgba(0,255,153,.85);
    border-radius:14px;
    display:inline-block;
    color:var(--text);
    background:rgba(0,0,0,.55);
    box-shadow:0 0 14px rgba(0,255,153,.14);
    user-select:none;
    transition:.18s;
    min-width: 220px;
  }
  #pair:hover{
    transform: translateY(-1px);
    box-shadow:0 0 22px rgba(0,255,153,.22);
  }

  .footer{
    margin-top:18px;
    font-size:.85rem;
    color:rgba(234,255,246,.72);
    text-align:center;
  }

  .wa-fab{
    position:fixed;
    right:16px;
    bottom:16px;
    z-index:50;
    width:58px;
    height:58px;
    border-radius:999px;
    border:1px solid rgba(0,255,153,.42);
    background: radial-gradient(120% 120% at 30% 20%, rgba(0,255,153,.60), rgba(0,0,0,.70));
    box-shadow: 0 0 18px rgba(0,255,153,.30), 0 14px 40px rgba(0,0,0,.55);
    display:grid;
    place-items:center;
    text-decoration:none;
    transition:.18s;
  }
  .wa-fab:hover{ transform: translateY(-2px) scale(1.02); }
  .wa-fab i{
    font-size:28px;
    color:#0bff9b;
    text-shadow:0 0 12px rgba(0,255,153,.55);
  }

  @media (max-width:480px){
    .header h1{font-size:1.9rem}
    .container{padding:30px 16px; margin-top:118px}
    .input-container{flex-direction:column}
    .input-container input{border-radius:12px; margin-bottom:10px}
    .input-container button{border-radius:12px; padding:12px}
    .wa-fab{ right:12px; bottom:12px; width:54px; height:54px; }
    #pair{min-width: 200px;}
  }
</style>
</head>

<body>
<div class="glow"></div>
<div class="matrix-bg" id="matrix-bg"></div>

<div class="header">
  <h1 class="glitch" data-text="NOVA XMD V1"><i class="fas fa-terminal icon"></i>NOVA XMD V1</h1>
  <p>WhatsApp Pairing Code Generator</p>
</div>

<div class="container">
  <div class="marquee-wrap">
    <div class="marquee" aria-hidden="true">
      <span>✨ NOVA BOT WEB • NOVA XMD V1 • PAIRING SYSTEM ✨</span>
    </div>
  </div>

  <div class="input-container">
    <input type="tel" id="number" placeholder="Ex: 226XXXXXXXX(sans +)" inputmode="numeric">
    <button id="submit"><i class="fa-solid fa-bolt"></i> Générer Code</button>
  </div>

  <div class="loader-wrap" id="loader">
    <div class="loader-label">Génération…</div>
    <div class="loader-bar" aria-label="Chargement"></div>
  </div>

  <main id="pair"></main>

  <div class="footer">
    <i class="fas fa-shield-alt"></i> Secure Connection • © DEV NOVA
  </div>
</div>

<a class="wa-fab" href="https://wa.me/22657585850" target="_blank" rel="noopener">
  <i class="fa-brands fa-whatsapp"></i>
</a>

<script>
  const pairContainer = document.getElementById("pair");
  const submitBtn = document.getElementById("submit");
  const numberInput = document.getElementById("number");
  const loader = document.getElementById("loader");
  const matrixBg = document.getElementById("matrix-bg");

  function createMatrix() {
    matrixBg.innerHTML = "";
    const lines = window.innerWidth < 480 ? 36 : 55;
    for (let i = 0; i < lines; i++) {
      const line = document.createElement('div');
      line.classList.add('matrix-line');
      line.style.left = `${Math.random() * 100}%`;
      line.style.animationDuration = `${Math.random() * 3 + 2.2}s`;
      line.style.animationDelay = `${Math.random() * 5}s`;
      matrixBg.appendChild(line);
    }
  }

  function onlyDigits(s){ return String(s||"").replace(/[^0-9]/g,''); }

  async function copyCode(){
    const codeElem = document.getElementById("copy");
    const codeText = codeElem.innerText.replace('CODE: ', '').trim();

    try{ await navigator.clipboard.writeText(codeText); }
    catch{
      const ta = document.createElement("textarea");
      ta.value = codeText;
      document.body.appendChild(ta);
      ta.select();
      document.execCommand("copy");
      document.body.removeChild(ta);
    }

    codeElem.innerText = "COPIED ✅";
    codeElem.style.color = "#ffff00";
    setTimeout(() => {
      codeElem.innerText = "CODE: " + codeText;
      codeElem.style.color = "#eafff6";
    }, 1500);
  }

  submitBtn.addEventListener("click", async (e) => {
    e.preventDefault();

    const number = onlyDigits(numberInput.value);

    if(!number || number.length < 8){
      pairContainer.innerHTML =
        `<div style="color:#ffff00; padding:12px; border:1px solid rgba(255,255,0,.35); border-radius:12px; background:rgba(255,255,0,.08); text-align:center;">
          Numéro invalide (mets seulement les chiffres, sans +).
        </div>`;
      loader.style.display = "none";
      return;
    }

    submitBtn.disabled = true;
    loader.style.display = "flex";
    pairContainer.innerHTML = "";

    try{
      const res = await fetch(`/pair?number=${number}`);
      const data = await res.json();

      const code = String(data?.code || "").trim();
      if (!code || code.length < 6) throw new Error("Code invalide");

      pairContainer.innerHTML = `<span id="copy" onclick="copyCode()">CODE: ${code}</span>`;
    }catch(err){
      pairContainer.innerHTML =
        `<div style="color:#ff5555; padding:12px; border:1px solid rgba(255,85,85,.35); border-radius:12px; background:rgba(255,85,85,.08); text-align:center;">
          ❌ Impossible de générer le code WhatsApp.<br><br>
          Vérifie que ton serveur est en ligne et que <b>/pair</b> fonctionne.
        </div>`;
    }

    loader.style.display = "none";
    submitBtn.disabled = false;
  });

  createMatrix();
  window.addEventListener("resize", createMatrix);
</script>
</body>
</html>